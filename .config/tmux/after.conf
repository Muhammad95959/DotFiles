# ============================
# General Settings
# ============================
bind-key -n C-l if-shell '[ "$(tmux list-panes | wc -l)" -gt 1 ]' 'select-pane -R' 'send-keys C-l'

bind b run-shell "sesh connect \"$(
  sesh list --icons | fzf-tmux -p 85%,70% \
    --no-sort --ansi --border-label ' sesh ' --prompt 'âš¡  ' \
    --header '  ^a all ^t tmux ^g configs ^x zoxide ^d tmux kill ^f find' \
    --bind 'tab:down,btab:up' \
    --bind 'ctrl-a:change-prompt(âš¡  )+reload(sesh list --icons)' \
    --bind 'ctrl-t:change-prompt(ğŸªŸ  )+reload(sesh list -t --icons)' \
    --bind 'ctrl-g:change-prompt(âš™ï¸  )+reload(sesh list -c --icons)' \
    --bind 'ctrl-x:change-prompt(ğŸ“  )+reload(sesh list -z --icons)' \
    --bind 'ctrl-f:change-prompt(ğŸ”  )+reload(fd -H -d 2 -t d -E .Trash . ~)' \
    --bind 'ctrl-d:execute(tmux kill-session -t {2..})+change-prompt(âš¡  )+reload(sesh list --icons)' \
    --preview-window 'right:55%' \
    --preview 'sesh preview {}'
)\""

# ============================
# Status Bar Configuration
# ============================
set -g status-position top
set -g status-style "bg=default"
set -g status-justify "absolute-centre"

# ============================
# Pane Borders
# ============================
setw -g pane-border-status top
setw -g pane-border-format ""
setw -g pane-border-lines single
setw -g pane-active-border-style "bg=default,fg=#{@thm_overlay_0}"
setw -g pane-border-style "bg=default,fg=#{@thm_surface_0}"

# ============================
# Window Management
# ============================
set -wg automatic-rename on
set -g automatic-rename-format "Window"

# Window status appearance
set -g window-status-format " #I#{?#{!=:#{window_name},Window},: #W,} "
set -g window-status-style "bg=default,fg=#{@thm_rosewater}"
set -g window-status-last-style "bg=default,fg=#{@thm_peach}"
set -g window-status-activity-style "bg=#{@thm_red},fg=#{@thm_bg}"
set -g window-status-bell-style "bg=#{@thm_red},fg=#{@thm_bg},bold"
set -gF window-status-separator "#[bg=default,fg=#{@thm_overlay_0}]â”‚"

# Current window style
set -g window-status-current-format " #I#{?#{!=:#{window_name},Window},: #W,} "
set -g window-status-current-style "bg=#{@thm_peach},fg=#{@thm_bg},bold"
